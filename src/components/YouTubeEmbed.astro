---
interface Props {
  videoId: string;
  title?: string;
  width?: number | string;
  height?: number | string;
  autoplay?: boolean;
  controls?: boolean;
  showInfo?: boolean;
  rel?: boolean;
  loop?: boolean;
  startAt?: number;
}

const {
  videoId,
  title = "YouTube video player",
  width = 560,
  height = 315,
  autoplay = false,
  controls = true,
  showInfo = true,
  rel = false,
  loop = false,
  startAt = 0,
} = Astro.props;

// Build the YouTube URL with parameters
let youtubeUrl = `https://www.youtube.com/embed/${videoId}?`;
const params = new URLSearchParams({
  autoplay: autoplay ? "1" : "0",
  controls: controls ? "1" : "0",
  showinfo: showInfo ? "1" : "0",
  rel: rel ? "1" : "0",
  loop: loop ? "1" : "0",
});

if (startAt > 0) {
  params.append("start", startAt.toString());
}

youtubeUrl += params.toString();
---
<div class="youtube-embed-container sticky">
  <iframe
    src={youtubeUrl}
    title={title}
    frameborder="0"
    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
    referrerpolicy="strict-origin-when-cross-origin"
    allowfullscreen
  ></iframe>
</div>

<style>
  .youtube-embed-container iframe {
    border: 0;
    aspect-ratio: 16/9;
    width: 100%;
  }

  div.sticky {
    position: sticky;
    top: 64px;
  }

  @media (max-width: 768px) {
    div.sticky {
      top: 112px;
    }
  }
</style>
